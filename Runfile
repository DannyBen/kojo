require "runfile-tasks"
require "byebug"
require 'kojo'
require 'kojo/version'

title   "Kojo Developer Toolbelt"
summary "Runfile tasks for building the Kojo gem"
version Kojo::VERSION

RunfileTasks::RubyGems.all 'kojo'
RunfileTasks::Testing.rspec

help   "Run interactive console"
action :console, :c do
  run "bundle exec bin/console"
end

help "Generate example output files"
action :examples do
  say_status :invoke, 'examples'

  dirs = Dir['examples/*'].select { |f| File.directory? f }

  dirs.each do |folder|
    say_status :process, folder

    Dir.chdir folder do
      system "./runme > output.txt 2>&1"
    end
  end
  say_status :done, ''
end

help   "Generate changelog"
action :changelog do
  run 'github_changelog_generator'
  run "git commit -am 'update changelog' && git push"
end


require './debug.rb' if File.exist? 'debug.rb'